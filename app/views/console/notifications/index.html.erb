<% content_for(:title, t('console.notification.index.title')) %>

<div class="d-flex justify-content-end">
  <%= paginate @notifications, window: 1 %>
</div>
<div class="card content-datatable">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover table-sticky">
        <thead>
          <tr>
            <th>ID</th>
            <th><%= Notification.human_attribute_name(:subject) %></th>
            <th><%= Notification.human_attribute_name(:body) %></th>
            <th><%= Notification.human_attribute_name(:tags) %></th>
            <th><%= Notification.human_attribute_name(:published_from) %></th>
            <th><%= Notification.human_attribute_name(:published_to) %></th>
            <th><%= Notification.human_attribute_name(:status) %></th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          <% @notifications.each do |notification| %>
            <tr>
              <th><%= notification.id %></th>
              <td><%= notification.subject %></td>
              <td><%= notification.description %></td>
              <td>
                <% notification.notification_tags.order(order: :asc).each do |tag| %>
                <span class="badge badge-pill" style="color:#<%= tag.text_color %>;background-color:#<%= tag.body_color %>;"><%= tag.name%></span>
                <% end %>
              </td>
              <td><%= notification.published_from&.strftime("%d/%m/%Y %H:%M") %></td>
              <td><%= notification.published_to&.strftime("%d/%m/%Y %H:%M") %></td>
              <td>
                <%= notification.status %>
              </td>
              <td><%= link_to 'Edit', edit_console_notification_path(notification), class: "btn btn-primary" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="card-footer">
    <div class="d-flex justify-content-start">
      <div>
        <%= link_to new_console_notification_path, class: 'btn footer-btn', style: 'width: auto;' do %>
          <i class="fas fa-plus"></i> <%= t 'console.notification.button.add' %>
        <% end %>
      </div>
    </div>
  </div>
</div>
