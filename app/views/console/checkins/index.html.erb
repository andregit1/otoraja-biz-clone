<% content_for(:title, t('admin.transaction.title')) %>

<%= render 'nav' %>

<%= render 'search' %>

<div class="card card-widget">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table mbuttom-0">
        <tbody>
          <% unless @checkin.present? || params[:no_trx].present? %>
            <% @checkins.each do |checkin| %>
              <tr class="d-flex">
                <td class="col-3 p-0 pl-3">
                  <br/>
                  <span class="text-label"><%= t('admin.transaction.no_trx') %></span><br/>
                  <span class="text-label"><%= t('admin.transaction.start') %></span><br/>
                  <span class="text-label"><%= t('admin.transaction.done') %></span><br/>
                  <span class="text-label"><%= t('admin.transaction.total') %></span><br/><br/>
                </td>
                <td class="col-7 p-0 pl-1">
                  <br/>
                  <span class="text-label font-weight-bold"><%= checkin.checkin_no %></span><br/>
                  <span class="text-label"><%= formatedDateTz(checkin&.datetime, 'Jakarta') %></span><br/>
                  <% if checkin.checkout_datetime.present? %>
                    <span class="text-label"><%= formatedDateTz(checkin&.checkout_datetime, 'Jakarta') %></span><br/>
                  <% else %>
                    <span class="text-label text-color-red">Belum Selesai</span><br/>
                  <% end %>
                  <span class="text-label"><%= formatedAmount(checkin&.maintenance_log&.total_price) if checkin.maintenance_log.present? %></span><br/><br/>
                </td>
                <td class="col-2 p-0 pr-2">
                  <br/>
                  <div class="d-flex justify-content-end">
                    <span>
                      <%= link_to console_checkin_path(checkin),:class => "btn btn-primary" do %>
                        <i class="fas fa-eye"></i>
                      <% end %>
                    <span><br/>
                    <span>
                      <% if params[:mode].to_sym == :deleted %>
                        <p class="mt-1 text-small text-center font-weight-bold void-border"><%= t('admin.transaction.void_uppercase') %></p>
                      <% end %>
                    </span>
                  </div>
                </td>
              </tr>
            <% end %>
          <% else %>
            <% if @checkin.present? %>
              <tr class="d-flex">
                <td class="col-3 p-0 pl-3">
                  <br/>
                  <span class="text-label"><%= t('admin.transaction.no_trx') %></span><br/>
                  <span class="text-label"><%= t('admin.transaction.start') %></span><br/>
                  <span class="text-label"><%= t('admin.transaction.done') %></span><br/>
                  <span class="text-label"><%= t('admin.transaction.total') %></span><br/><br/>
                </td>
                <td class="col-7 p-0 pl-1">
                  <br/>
                  <span class="text-label font-weight-bold"><%= @checkin&.checkin_no %></span><br/>
                  <span class="text-label"><%= formatedDateTz(@checkin&.datetime, 'Jakarta') %></span><br/>
                  <% if @checkin&.checkout_datetime.present? %>
                    <span class="text-label"><%= formatedDateTz(@checkin&.checkout_datetime, 'Jakarta') %></span><br/>
                  <% else %>
                    <span class="text-label text-color-red">Belum Selesai</span><br/>
                  <% end %>                
                  <span class="text-label"><%= formatedAmount(@checkin&.maintenance_log&.total_price) if @checkin.maintenance_log.present? %></span><br/><br/>
                </td>
                <td class="col-2 p-0 pr-2">
                  <br/>
                  <div class="d-flex justify-content-end">
                    <span>
                      <%= link_to admin_checkin_show_path(@checkin),:class => "btn btn-primary" do %>
                        <i class="fas fa-eye"></i>
                      <% end %>
                    <span><br/>
                    <span>
                      <% if params[:mode].to_sym == :deleted %>
                        <p class="mt-1 text-small text-center font-weight-bold void-border"><%= t('admin.transaction.void_uppercase') %></p>
                      <% end %>
                    </span>
                  </div>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="d-flex justify-content-center">
  <%= paginate @checkins, window: 1 if !params[:no_trx].present? %>
</div>
